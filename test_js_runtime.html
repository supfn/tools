<button id="btn">
    Click Me
</button>

<img src="" alt="imageeee" id="img">
<script>
    document.querySelector('#btn').addEventListener('click', function () {
        var img = document.querySelector('#img');

        img.src = "http://static2.quduopai.cn/image/sp/2018/08/18/5b77ecfc24113414369.jpg?x-oss-process=image/resize,w_80";

        var xhr = new XMLHttpRequest();
        xhr.open("GET", `http://static2.quduopai.cn/image/sp/2018/08/18/5b77ecfc24113414369.jpg`, true);
        xhr.send(null);

        var start = +new Date;
        while (+new Date - start < 3000){

        }
        alert("This EventLoop Middle");
        img.onload = () => { alert("img onload!!!") };
        img.onerror = () => { alert("img onerror!!!") };
        alert("This EventLoop End, nextTick begin")
    })
</script>